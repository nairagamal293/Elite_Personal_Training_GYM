<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership Plans - Elite Gym</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        /* Global Styles */
        :root {
            --primary-color: #800020;      /* Burgundy */
            --secondary-color: #a52a2a;     /* Lighter Burgundy */
            --accent-color: #e6b8af;        /* Light Burgundy Accent */
            --dark-color: #212529;
            --light-color: #f8f9fa;
            --text-dark: #333;
            --text-light: #666;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            background-color: #fff;
            overflow-x: hidden;
        }
        
        /* Navbar Styles */
        .navbar {
            background-color: rgba(255, 255, 255, 0.95) !important;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            padding: 15px 0;
            transition: all 0.3s ease;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--primary-color) !important;
        }
        
        .navbar-nav .nav-link {
            color: var(--text-dark) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .navbar-nav .nav-link:hover, .navbar-nav .nav-link.active {
            color: var(--primary-color) !important;
        }
        
        .navbar-nav .nav-link:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.3s ease;
        }
        
        .navbar-nav .nav-link:hover:after, .navbar-nav .nav-link.active:after {
            width: 70%;
        }
        
        /* Page Header */
        .page-header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 60px 0;
            margin-bottom: 40px;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .page-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        /* Section Styles */
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-dark);
            position: relative;
            display: inline-block;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            width: 70px;
            height: 4px;
            background-color: var(--primary-color);
            bottom: -10px;
            left: 0;
        }
        
        .section-subtitle {
            color: var(--text-light);
            margin-bottom: 50px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Pricing Cards */
        .pricing-card {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            height: 100%;
            border: none;
            position: relative;
        }
        
        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(128, 0, 32, 0.15);
        }
        
        .featured-badge {
            position: absolute;
            top: 15px;
            right: -30px;
            background-color: var(--primary-color);
            color: white;
            padding: 5px 30px;
            font-weight: 600;
            transform: rotate(45deg);
            font-size: 0.8rem;
            z-index: 1;
        }
        
        .pricing-header {
            background-color: var(--primary-color);
            color: white;
            padding: 25px 20px;
            text-align: center;
        }
        
        .pricing-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .pricing-price {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .pricing-price span {
            font-size: 1rem;
            font-weight: 400;
        }
        
        .pricing-body {
            padding: 30px 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
        }
        
        .pricing-description {
            color: var(--text-light);
            margin-bottom: 20px;
            flex-grow: 1;
        }
        
        .pricing-features {
            list-style: none;
            padding: 0;
            margin-bottom: 30px;
            text-align: left;
        }
        
        .pricing-features li {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            color: var(--text-light);
        }
        
        .pricing-features li:last-child {
            border-bottom: none;
        }
        
        .pricing-features li i {
            color: var(--primary-color);
            margin-right: 10px;
        }
        
        .btn-pricing {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            margin-top: auto;
        }
        
        .btn-pricing:hover {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-pricing-outline {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }
        
        .btn-pricing-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Benefits Section */
        .benefits-section {
            padding: 60px 0;
            background-color: #f8f0f3;
        }
        
        .benefit-item {
            padding: 20px;
            border-radius: 10px;
            background-color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            height: 100%;
        }
        
        .benefit-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(128, 0, 32, 0.1);
        }
        
        .benefit-icon {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .benefit-item h5 {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-dark);
        }
        
        .benefit-item p {
            color: var(--text-light);
            margin-bottom: 0;
        }
        
        /* FAQ Section */
        .faq-section {
            padding: 60px 0;
        }
        
        .accordion {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .accordion-item {
            border: none;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .accordion-item:last-child {
            border-bottom: none;
        }
        
        .accordion-button {
            background-color: white;
            color: var(--text-dark);
            font-weight: 500;
            box-shadow: none;
            padding: 20px;
        }
        
        .accordion-button:not(.collapsed) {
            background-color: var(--accent-color);
            color: var(--primary-color);
        }
        
        .accordion-button:focus {
            box-shadow: none;
            border-color: var(--primary-color);
        }
        
        .accordion-button::after {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23800020'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
        }
        
        .accordion-button:not(.collapsed)::after {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23800020'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
        }
        
        /* Modal Styles */
        .modal-content {
            border-radius: 10px;
            border: none;
        }
        
        .modal-header {
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0;
            border-bottom: none;
        }
        
        .modal-title {
            font-weight: 600;
        }
        
        .btn-close {
            filter: brightness(0) invert(1);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 10px 15px;
            transition: all 0.3s ease;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(128, 0, 32, 0.25);
        }
        
        .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 70px 0 20px;
            margin-top: 80px;
        }
        
        .footer-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }
        
        .footer-text {
            margin-bottom: 20px;
            color: #ccc;
        }
        
        .social-icons a {
            display: inline-block;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            margin-right: 10px;
            color: white;
            transition: all 0.3s ease;
        }
        
        .social-icons a:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .footer-links a:hover {
            color: var(--primary-color);
            padding-left: 5px;
        }
        
        .contact-info i {
            color: var(--primary-color);
            margin-right: 10px;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #ccc;
        }
        
        /* Loading Spinner */
        .spinner-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        .spinner-border {
            color: var(--primary-color) !important;
        }
        
        /* Alert Styles */
        .alert {
            border: none;
            border-radius: 8px;
        }
        
        .alert-warning {
            background-color: rgba(255, 152, 0, 0.1);
            color: #ff9800;
        }
        
        .alert-success {
            background-color: rgba(76, 175, 80, 0.1);
            color: #4caf50;
        }
        
        .alert-danger {
            background-color: rgba(244, 67, 54, 0.1);
            color: #f44336;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .page-header {
                padding: 40px 0;
            }
            
            .page-title {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .benefits-section, .faq-section {
                padding: 40px 0;
            }
        }
        
        @media (max-width: 576px) {
            .page-title {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .pricing-price {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-lightning-charge-fill"></i> Elite Gym
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="classes.html">Classes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="sessions.html">Online Sessions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="trainers.html">Trainers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="pricing.html">Membership</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="shop.html">Shop</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle"></i> Account
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="login.html">Login</a></li>
                            <li><a class="dropdown-item" href="register.html">Register</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="dashboard.html">My Dashboard</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h1 class="page-title">Membership Plans</h1>
            <p class="page-subtitle">Flexible options designed to fit your lifestyle and fitness goals</p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mb-5">
        <!-- Membership Plans -->
        <div class="row g-4 mb-5" id="membership-plans">
            <div class="col-12 text-center">
                <div class="spinner-container">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Membership Benefits -->
        <div class="benefits-section">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="section-title">All Membership Plans Include</h2>
                </div>
                <div class="row g-4">
                    <div class="col-md-3">
                        <div class="benefit-item text-center">
                            <div class="benefit-icon">
                                <i class="bi bi-calendar-check fs-1"></i>
                            </div>
                            <h5>Unlimited Class Access</h5>
                            <p>Book any class anytime based on your plan hours</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="benefit-item text-center">
                            <div class="benefit-icon">
                                <i class="bi bi-person-workspace fs-1"></i>
                            </div>
                            <h5>Expert Trainers</h5>
                            <p>Access to our certified female trainers</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="benefit-item text-center">
                            <div class="benefit-icon">
                                <i class="bi bi-camera-video fs-1"></i>
                            </div>
                            <h5>Online Sessions</h5>
                            <p>Join virtual classes from anywhere</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="benefit-item text-center">
                            <div class="benefit-icon">
                                <i class="bi bi-shop fs-1"></i>
                            </div>
                            <h5>Member Discounts</h5>
                            <p>Special prices on shop products</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FAQ Section -->
        <div class="faq-section">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="section-title">Frequently Asked Questions</h2>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="accordion" id="faqAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1" aria-expanded="true" aria-controls="faq1">
                                        How do I book a class?
                                    </button>
                                </h2>
                                <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Once you have an active membership, you can book classes through your dashboard. Simply go to the "Book Classes" section, select your preferred class and time, and confirm your booking.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2" aria-expanded="false" aria-controls="faq2">
                                        Can I cancel my booking?
                                    </button>
                                </h2>
                                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Yes, you can cancel your booking up to 24 hours before the scheduled class time. Cancellations made less than 24 hours before may not be eligible for a refund of membership hours.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3" aria-expanded="false" aria-controls="faq3">
                                        What happens if my membership expires?
                                    </button>
                                </h2>
                                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        When your membership expires, you won't be able to book new classes until you renew. You'll receive reminder emails before your expiration date, and you can easily renew through your dashboard.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4" aria-expanded="false" aria-controls="faq4">
                                        Can I upgrade or downgrade my plan?
                                    </button>
                                </h2>
                                <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Yes, you can upgrade your plan at any time. Downgrades will take effect at your next renewal cycle. Contact our support team or visit your dashboard to make changes to your plan.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Purchase Membership Modal -->
    <div class="modal fade" id="purchaseModal" tabindex="-1" aria-labelledby="purchaseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="purchaseModalLabel">Purchase Membership</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="purchase-form">
                        <input type="hidden" id="membership-type" name="type">
                        <div class="mb-3">
                            <h6 id="selected-plan-name" class="fw-bold"></h6>
                            <p id="selected-plan-details" class="text-muted small"></p>
                        </div>
                        <div class="mb-3">
                            <label for="payment-method" class="form-label">Payment Method</label>
                            <select class="form-select" id="payment-method" required>
                                <option value="">Select payment method</option>
                                <option value="credit-card">Credit Card</option>
                                <option value="paypal">PayPal</option>
                                <option value="bank-transfer">Bank Transfer</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="card-number" class="form-label">Card Number</label>
                            <input type="text" class="form-control" id="card-number" placeholder="1234 5678 9012 3456" required>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="expiry-date" class="form-label">Expiry Date</label>
                                <input type="text" class="form-control" id="expiry-date" placeholder="MM/YY" required>
                            </div>
                            <div class="col-md-6">
                                <label for="cvv" class="form-label">CVV</label>
                                <input type="text" class="form-control" id="cvv" placeholder="123" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="cardholder-name" class="form-label">Cardholder Name</label>
                            <input type="text" class="form-control" id="cardholder-name" placeholder="Full Name" required>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="auto-renew">
                            <label class="form-check-label" for="auto-renew">
                                Auto-renew membership
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirm-purchase">Complete Purchase</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5 class="footer-title">Elite Gym</h5>
                    <p class="footer-text">Empowering women through fitness and wellness.</p>
                    <div class="social-icons">
                        <a href="#"><i class="bi bi-facebook"></i></a>
                        <a href="#"><i class="bi bi-twitter"></i></a>
                        <a href="#"><i class="bi bi-instagram"></i></a>
                        <a href="#"><i class="bi bi-youtube"></i></a>
                    </div>
                </div>
                <div class="col-md-4">
                    <h5 class="footer-title">Quick Links</h5>
                    <ul class="footer-links">
                        <li><a href="classes.html">Classes</a></li>
                        <li><a href="sessions.html">Online Sessions</a></li>
                        <li><a href="trainers.html">Trainers</a></li>
                        <li><a href="pricing.html">Membership Plans</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5 class="footer-title">Contact Us</h5>
                    <div class="contact-info">
                        <p><i class="bi bi-geo-alt"></i> 123 Fitness Street, Health City, HC 12345</p>
                        <p><i class="bi bi-telephone"></i> (123) 456-7890</p>
                        <p><i class="bi bi-envelope"></i> info@elitegym.com</p>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Elite Gym. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            // DOM elements
            const membershipPlans = document.getElementById('membership-plans');
            const purchaseModal = new bootstrap.Modal(document.getElementById('purchaseModal'));
            const selectedPlanName = document.getElementById('selected-plan-name');
            const selectedPlanDetails = document.getElementById('selected-plan-details');
            const membershipTypeInput = document.getElementById('membership-type');
            const confirmPurchaseBtn = document.getElementById('confirm-purchase');
            const purchaseForm = document.getElementById('purchase-form');
            
            // Load membership plans
            try {
                const plans = await apiService.getMembershipTypes();
                
                membershipPlans.innerHTML = '';
                
                plans.forEach((plan, index) => {
                    const isFeatured = index === 1; // Make the middle plan featured
                    const planCard = `
                        <div class="col-md-4">
                            <div class="card pricing-card">
                                ${isFeatured ? '<div class="featured-badge">Most Popular</div>' : ''}
                                <div class="pricing-header">
                                    <h5 class="pricing-title">${plan.name}</h5>
                                    <div class="pricing-price">$${plan.price}<span>/${plan.durationMonths} month${plan.durationMonths > 1 ? 's' : ''}</span></div>
                                </div>
                                <div class="pricing-body">
                                    <p class="pricing-description">${plan.description}</p>
                                    <ul class="pricing-features">
                                        <li><i class="bi bi-check-circle-fill"></i> ${plan.totalHours} hours total</li>
                                        <li><i class="bi bi-check-circle-fill"></i> Access to all classes</li>
                                        <li><i class="bi bi-check-circle-fill"></i> Online booking system</li>
                                        <li><i class="bi bi-check-circle-fill"></i> Personal trainer support</li>
                                        <li><i class="bi bi-check-circle-fill"></i> Member discounts</li>
                                    </ul>
                                    ${authService.isLoggedIn() ? 
                                        `<button class="btn ${isFeatured ? 'btn-pricing' : 'btn-pricing-outline'} w-100 purchase-btn" data-plan='${JSON.stringify(plan)}'>Purchase Plan</button>` :
                                        `<a href="register.html" class="btn ${isFeatured ? 'btn-pricing' : 'btn-pricing-outline'} w-100">Sign Up to Purchase</a>`
                                    }
                                </div>
                            </div>
                        </div>
                    `;
                    membershipPlans.innerHTML += planCard;
                });
                
                // Add event listeners to purchase buttons
                document.querySelectorAll('.purchase-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const plan = JSON.parse(this.getAttribute('data-plan'));
                        selectedPlanName.textContent = plan.name;
                        selectedPlanDetails.textContent = `${plan.totalHours} hours for ${plan.durationMonths} month${plan.durationMonths > 1 ? 's' : ''} - $${plan.price}`;
                        membershipTypeInput.value = plan.name;
                        purchaseModal.show();
                    });
                });
                
            } catch (error) {
                console.error('Error loading membership plans:', error);
                membershipPlans.innerHTML = `
                    <div class="col-12">
                        <div class="alert alert-warning">Unable to load membership plans at this time. Please try again later.</div>
                    </div>
                `;
            }
            
            // Handle purchase confirmation
            confirmPurchaseBtn.addEventListener('click', async function() {
                if (!formValidator.validateRequired(purchaseForm)) {
                    return;
                }
                
                this.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Processing...';
                this.disabled = true;
                
                try {
                    const membershipType = membershipTypeInput.value;
                    
                    // Purchase membership
                    await apiService.purchaseMembership({
                        type: membershipType
                    });
                    
                    // Show success message
                    uiHelper.showAlert('Membership purchased successfully!', 'success');
                    
                    // Close modal
                    purchaseModal.hide();
                    
                    // Redirect to dashboard
                    setTimeout(() => {
                        window.location.href = 'dashboard.html';
                    }, 1500);
                    
                } catch (error) {
                    console.error('Error purchasing membership:', error);
                    uiHelper.showAlert(error.message || 'Failed to purchase membership. Please try again.', 'danger');
                    
                    // Reset button
                    this.innerHTML = 'Complete Purchase';
                    this.disabled = false;
                }
            });
        });
    </script>
</body>
</html>